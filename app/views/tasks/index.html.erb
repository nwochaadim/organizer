<h1>Tasks</h1>

<%= search_form_for @q do |f| %>
  <%= f.label :name_or_notes_cont, 'Search by name or description' %>
  <%= f.search_field :name_or_notes_cont %>

  <%= f.submit %>
<% end %>

<% if @tasks.present? %>
  <table>
    <tr>
      <th><%= sort_link(@q, :name, 'Name') %></th>
      <th><%= sort_link(@q, :notes, 'Notes') %></th>
      <th>Starts at</th>
      <th>Completed at</th>
    </tr>

    <tbody>
      <% @tasks.each do |task| %>
        <tr>
          <td><%= task.name %></td>
          <td><%= truncate(task.notes, length: 15) %></td>
          <td><%= task.starts_at %></td>
          <td><%= task.completed_at %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

